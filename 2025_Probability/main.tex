\documentclass[aspectratio=169, smaller]{beamer}
\setbeameroption{hide notes}
\mode<presentation>
\usepackage[]{slidespreamble}
\usepackage[]{math_commands}

% presentation title
\title{Meausure-theory view of probability}
\subtitle{handwavy and informal}

\begin{document}

\input{intro_v01}

% \begin{frame}
% \layout
% \end{frame}

\begin{frame}[t]{Outline}
\setcounter{framenumber}{1}
\tableofcontents[]
\end{frame}

\section{Probability space definition}
\begin{frame}{Probability space}

\structure{Probability space $(S, \salg, \mP)$:}
\begin{itemize}
  \item measurable space $(S, \salg)$
  \begin{itemize}
    \item $S$ - sample space
    \item $\salg$ - $\sigma$-algebra on $S$ - collection of subsets
  \end{itemize}
  \item probability measure $\mP$ - real-valued function on sample space $(S, \salg)$ s.t.:
  \begin{itemize}
    \item non-negativity: $\mP(A) \geq 0$ for all $A \in \salg$
    \item countable additivity: countable disjoint $\{A_i: i \in I\} \in \salg \Rightarrow \mP\left( \bigcup_{i \in I} A_i \right) = \sum_{i \in I} \mP(A_i)$
    \item \alert{normalization: $\mP(S) = 1$}
  \end{itemize}
\end{itemize}

\vskip 1em
\structure{Note:}
any finite positive measure $\mu$ on $(S, \mathscr{S})$ $\Rightarrow$ prob. measure $\mP(A) = \mu(A) / \mu(S)$.
\end{frame}

\note[enumerate]
{
\item $\sigma$-algebra $\salg$ - non-empty collection of subsets closed under complement and countable unions 
\vskip -0.1em
\begin{itemize}
    \item if $A \in \salg$, then $A^c \in \salg$
    \item if $A_i \in \salg$ for $i \in I$ (countable index set), then $\bigcup_{i \in I} A_i \in \salg$
    \item if $A \in \salg$ and $A \in \salg$, then $A \cup B \in \salg$
    \item in consequence $\emptyset \in \salg$ and $S \in \salg$
  \end{itemize}
\item $(S, \salg)$ forms a measurable space in this context called the sample space.
\item Probability measure is the same as probability distribution or probability law
\item More generally a positive measure on $(S, \salg)$ is a function $\mu: \salg \to [0, \infty]$ satisfying non-negativity and countable additivity. A probability measure is a positive measure with total measure equal to 1. 
\item The triplet $(S, \salg, \mu)$ is a measure space. Probability space is a special case of a measure space where the total measure is 1.  
\item Any finite positive measure $\mu$ on the sample space $(S, \mathscr{S})$ can be re-scaled into a probability measure as $\mP(A) = \mu(A) / \mu(S), \ A \in \mathscr{S}$ $\Rightarrow$ link to energy models.
}

\section{Positive measure}
\begin{frame}{Positive measure}
\structure{Positive measure on $(S, \salg)$ - function $\mu: \salg \to [0, \infty]$ s.t.:}
\begin{itemize}
  \item $\mu(\emptyset) = 0$
  \item countable additivity: countable disjoint $\{A_i: i \in I\} \in \salg \Rightarrow \mu\left( \bigcup_{i \in I} A_i \right) = \sum_{i \in I} \mu(A_i) $
  \item $\Rightarrow$ measure space $(S, \salg, \mu)$
\end{itemize}

\structure{Note:} if $\mu(S) < \infty \Rightarrow (S, \salg, \mu)$ \alert{finite} measure space.

\vskip 1em
\structure{Examples of measures:}
\begin{itemize}
\item counting measure: for discrete $(S, \salg)$, $\#(A) = $ number of elements in $A \in \salg$
\item Lebesgue measure: for Eucledean $(\mR, \mathscr{R})$, interval $I = [a, b] \in \mathscr{R}$, $\lambda(I) = b - a$ - \alert{length}\\
\hspace*{2em} Eucledean $(\mR^d, \mathscr{R}^d)$, $\mathbf{A} \in \mathscr{R}^d$, $\lambda(\mathbf{A}) = \lambda(A_1) \times \lambda(A_2) \times \ldots \times \lambda(A_d)$  - \alert{area, volume}
% \item Dirac measure at point $s_0 \in S$: $\delta_{s_0}(A) = 1$ if $s_0 \in A$, else $0$
\item probability measure: positive finite measure on $(S, \salg)$ s.t. $\mP(S) = 1$
\end{itemize}
\end{frame}

\note[enumerate]{
\item Definition of discrete and continuous space is a bit tricky and depends on the definition of topology but simply speaking  in discrete space the set $S$ is countable.
\item For d-dimensional Eucledean space $(\mR^d, \mathscr{R}^d)$, $\mathbf{A} = A_1 \times A_2 \times \ldots \times A_d \in \mathscr{R}^d$, $A_1, A_2, \ldots, A_d \in \mathscr{R}$, $\lambda(\mathbf{A}) = \lambda(A_1) \times \lambda(A_2) \times \ldots \times \lambda(A_d)$
}

\begin{frame}{Pre-image and push-forward}
\structure{Forward (direct) image}\\
Assume sets $S$ and $T$, func $f : S \to T$, and $A \subseteq S$. \\
\alert{Forward (direct) image} of $A$ under $f$ is subset of $T$: $f(A) = \{f(x) \in T : x \in A\}$

\vskip 1em
\structure{Pre-image (ivnerse image)}\\
Assume sets $S$ and $T$, func $f : S \to T$, and $B \subseteq T$. \\
\alert{Pre-image} of $B$ under $f$ is subset of $S$: $f^{-1}(B) = \{x \in S : f(x) \in B\}$

\vskip 1em
\structure{Push-forward measure}\\
Assume $(S, \salg, \mu)$, $(T, \mathscr{T})$ and $f : S \to T$\\
\alert{push-forward} of $\mu$ by $f$ is measure $\nu$ on $(T, \mathscr{T})$: 
$\nu(B) = \mu(f^{-1}(B)), \quad B \in \mathscr{T}$
% \begin{figure}[ht]
% \includegraphics[width=0.3\textwidth]{changeOfVar}
% \centering
% \end{figure}

\centering
\scalebox{0.5}{
\begin{tikzpicture}[>=Stealth]
% ===========================================================
% LEFT: domain S with mesh and rectangular f^{-1}(B)
% ===========================================================
\begin{scope}[shift={(-5,0)}]
    \node at (0,2.4) {$S$};
    % Mesh (vertical)
    \foreach \x in {-1.5,-1,...,1}
        \draw[gray!70] (\x,-2) -- (\x,2);
    % Mesh (horizontal)
    \foreach \y in {-1.5,-1,...,1.5}
        \draw[gray!70] (-2,\y) -- (1.5,\y);
    % Preimage region f^{-1}(B): ALIGNED WITH GRID
    % Rectangle from x = -1 to 0, y = -1 to 1
    \fill[blue!25,opacity=0.5] (-1,-1) rectangle (0,1);
    \draw[blue!60,thick] (-1,-1) rectangle (0,1);
    \node[blue!80] at (-0.5,0) {$f^{-1}(B)$};
\end{scope}
% ===========================================================
% Middle arrow: f
% ===========================================================
\draw[->,thick] (-3,0.5) -- (-1,0.5) node[midway,above] {$f: S \to T$};

\draw[<-,thick] (-3,-0.5) -- (-1,-0.5) node[midway,above] {$f^{-1}: T \to S$};

\node at (-2,-1.5) {\color{carnelian}$\mu(f^{-1}(B)) = \nu(B)$};
% ===========================================================
% RIGHT: codomain Y with warped mesh + EXACT image B
% ===========================================================
\begin{scope}[shift={(1,0)}]
    \node at (0,2.4) {$T$};
    % --- Warping function (same everywhere):
    %   x' = 0.9*x + 0.5*sin(y)
    %   y' = y + 0.5*sin(x)
    % The mesh AND the boundary of B use this same warp.
    % Warped vertical mesh lines
    \foreach \x in {-1.5,-1,...,1}
    \draw[gray!70,domain=-2:2,smooth,variable=\t]
        plot ({0.9*\x + 0.5*sin(\t r)}, {\t + 0.5*sin(\x r)});
    % Warped horizontal mesh lines
    \foreach \y in {-1.5,-1,...,1.5}
    \draw[gray!70,domain=-2:1.5,smooth,variable=\t]
        plot ({0.9*\t + 0.5*sin(\y r)}, {\y + 0.5*sin(\t r)});
    % ===========================================================
    % Image region B: the warped image of the rectangle
    % 
    % This region is *exactly* bounded by the four warped grid lines:
    %   x = -1, x = 0, y = -1, y = 1
    % ===========================================================

    % Path for B: traverse boundaries in order:
    %   bottom: y = -1, x ∈ [-1,0]
    %   right side: x = 0, y ∈ [-1,1]
    %   top: y = 1, x ∈ [0,-1]
    %   left side: x = -1, y ∈ [1,-1]
    \begin{scope}
        \fill[blue!25,opacity=0.5]
            % bottom edge: y = -1
            plot[domain=-1:0,smooth,variable=\x]
                ({0.9*\x + 0.5*sin(-1 r)}, {-1 + 0.5*sin(\x r)})
            % right edge: x = 0
            -- plot[domain=-1:1,smooth,variable=\y]
                ({0.9*0 + 0.5*sin(\y r)}, {\y + 0.5*sin(0 r)})
            % top edge: y = 1
            -- plot[domain=0:-1,smooth,variable=\x]
                ({0.9*\x + 0.5*sin(1 r)}, {1 + 0.5*sin(\x r)})
            % left edge: x = -1
            -- plot[domain=1:-1,smooth,variable=\y]
                ({0.9*(-1) + 0.5*sin(\y r)}, {\y + 0.5*sin(-1 r)})
            -- cycle;
        \draw[blue!60,thick]
            % bottom edge
            plot[domain=-1:0,smooth,variable=\x]
                ({0.9*\x + 0.5*sin(-1 r)}, {-1 + 0.5*sin(\x r)})
            % right
            -- plot[domain=-1:1,smooth,variable=\y]
                ({0.9*0 + 0.5*sin(\y r)}, {\y + 0.5*sin(0 r)})
            % top
            -- plot[domain=0:-1,smooth,variable=\x]
                ({0.9*\x + 0.5*sin(1 r)}, {1 + 0.5*sin(\x r)})
            % left
            -- plot[domain=1:-1,smooth,variable=\y]
                ({0.9*(-1) + 0.5*sin(\y r)}, {\y + 0.5*sin(-1 r)})
            -- cycle;
        \node[blue!80] at (-0.4,-0.1) {$B$};
    \end{scope}
\end{scope}
\end{tikzpicture}
}
  
\end{frame}


\note[enumerate]{
\item Careful, though the notation is the same, the inverse image does not have to be a function (the inverse function may not exist).
\item A \textbf{measurable function}\index{measurable function} is a function $f: S \to T$ where $(S, \mathscr{S})$ and $(T, \mathscr{T})$ are measurable spaces and $f^{-1}(A) \in \mathscr{S}$ for any $A \in \mathscr{T}$.
\item A continuous function $f: S \to T$ is measurable.
\item pullback
}




\begin{frame}{Null sets and equivalence}

\structure{Null set $A \in \salg$ if $\mu(A) = 0$}
\begin{itemize}
  \item if statement holds for all $s \in S$ except for a null set, it holds \alert{almost everywhere} (a.e.)
  \item sets $A, B \in \salg$ are \alert{equivalent} if $\mu(A \Delta B) = 0$, where $A \Delta B = (A \setminus B) \cup (B \setminus A)$
  \item measureble funcs $f, \, g: S \to T$ are \alert{equivalent} if $\mu\{s \in S : f(s) \neq g(s)\} = 0$
\end{itemize}



% \begin{block}{Important:}
% $A \in \salg$ is \alert{null} if $\mu(A) = 0$ \\
% if statement holds for all $s \in S$ except for a null set, it holds \alert{almost everywhere} (a.e.) \\
% two sets $A, B \in \salg$ are \alert{equivalent} if $\mu(A \Delta B) = 0$ where $A \Delta B = (A \setminus B) \cup (B \setminus A)$ \\
% two measureble functions $f, \, g: S \to T$ are \alert{equivalent} if $\mu\{s \in S : f(s) \neq g(s)\} = 0$  
% \end{block}
\end{frame}

\note[enumerate]{
\item sets $A, B \in \salg$ are \alert{equivalent} if $\mu(A \Delta B) = 0$, where $A \Delta B = (A \setminus B) \cup (B \setminus A)$
\item In probability space the almoste everywhere (a.e.) is equivalent to almost surely (a.s.) with respect to the probability measure $\mP$.
\item Assume a measure space $(S, \salg, \mu)$ a measurable space $(T, \mathscr{T})$ and a measurable function $f : S \to T$.
Then $\nu$ defined as below is a positive measure on $(T, \mathscr{T})$
$\nu(B) = \mu(f^{-1}(B)), \quad B \in \mathscr{T}$

}

\begin{frame}{Random variables}

\structure{Random variable $X: S \to T$ - measurable function $S$ to $T$}
\begin{itemize}
\item $(S, \salg, \mP)$ - probability space
\item $(T, \mathscr{T})$ - another measurable space
\item for outcome $s \in S$, $X$ takes value $x = X(s) \in T$ - realization of r.v. $X$
\item pre-image of $x \in T$: $X^{-1}(x) = \{s \in S: X(s) = x\} \in \salg$
\item pre-image of $B \in T$: $X^{-1}(B) = \{s \in S: X(s) \in B\} \in \salg$
\end{itemize}

\vskip 1em
\structure{Operations with measures:}
\begin{itemize}
\item assume $(R, \mathscr{R}) \subset (S, \salg)$ then $\mu$ restricted to $\mathscr{R}$ is measure on $(R, \mathscr{R})$
\item measure space $(S, \salg, \mu)$
 func $f: S \to T$ and measure $\nu$ on $(T, \mathscr{T})$ $\Rightarrow$ \alert{pullback measure} $\mu$ on $(S, \salg)$ defined as $\mu(A) = \nu(f(A))$ for $A \in \salg$
\item if $\mu$ is positive measure on $(S, \salg)$ then $c\mu$ for $c \in (0, \infty)$ is also positive measure on $(S, \salg)$
\item ha
\end{itemize}


  
\end{frame}

% \input{prob}


\end{document}